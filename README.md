# sa_portfolio_public
Коллекция артефактов по бизнес- и системному анализу: ТЗ, диаграммы, прототипы и SQL-скрипты. Примеры выявления требований, документирования и моделирования проектов.
# Техническое задание: Интеграция системы управления задачами с Юридической системой

## Общая информация
- **Заказчик:** Крупный финансовый институт (обезличено)
- **Интегрируемые системы:** 
  - Система управления задачами (SRC) → Юридическая система (DST)
- **Дата:** 2025 год

## Бизнес-контекст
Автоматизация процессов обработки входящих судебных исков в юридическом департаменте. Ручной ввод данных занимал значительное время и мог приводить к ошибкам. Интеграция позволила исключить дублирование работы и ускорить процесс регистрации исков.

## Пользовательские истории

### US-01: Автоматическое создание карточки иска в Юридической системе
**Как:** Пользователь модуля мониторинга судебных дел  
**Я хочу:** Чтобы при создании задачи в системе управления задачами автоматически создавалась карточка в Юридической системе  
**Цель:** Исключить ручной ввод дублирующих данных и ускорить процесс создания карточек.

**Критерии приемки:**
- Карточка создается в модуле Юридической системы при создании новой задачи в системе управления задачами.
- Система проверяет, что карточка не была создана ранее (по полю внешнего идентификатора).

### US-02: Автоматическое заполнение полей карточки
**Как:** Сотрудник юридического департамента  
**Я хочу:** Чтобы данные из системы задач корректно маппились в соответствующие поля Юридической системы  
**Цель:** Исключить ошибки ручного переноса информации.

**Критерии приемки:**
- Все поля из системы задач, указанные в маппинге, переносятся в Юридическую систему без ошибок.
- Для полей, требующих преобразования, данные корректно форматируются.
- Если поле в системе задач пустое, соответствующее поле в Юридической системе остается пустым или заполняется значением по умолчанию.

### Схема процесса:

<img width="1188" height="2060" alt="sequence" src="https://github.com/user-attachments/assets/3db67f52-7eac-4ff4-afe5-5e3a28b6edc1" />

### Основные этапы интеграции:

#### 1. Получение данных из системы задач
- **Метод:** GET /forms/{form-id}/register
- **Параметры:** Фильтрация по дате создания, сортировка по ID
- **Периодичность:** Ежедневная синхронизация

#### 2. Обработка и валидация данных
- Проверка на дубликаты
- Преобразование форматов данных
- Валидация обязательных полей

#### 3. Создание карточек в Юридической системе
- INSERT в основные таблицы БД
- Обработка связей между сущностями
- Логирование результатов

## Маппинг данных (пример для одной формы)

### Форма: "Входящие иски"

| Поле в системе задач | Поле в Юридической системе | Преобразование |
|---------------------|---------------------------|----------------|
| Истец               | PERSON.F + PERSON.I + PERSON.O | Конкатенация ФИО |
| ИНН                 | PERSON.INN                | Прямое отображение |
| Вид спора           | LAW_ACT_DEBT.TYP          | Справочное значение |
| Сумма требований    | LAW_ACT_DEBT.DAMAGES      | Прямое отображение |

*Полная таблица маппинга содержит 20+ полей для каждой из 5 форм*

## Доработки в базе данных

### Новые поля в таблице law_act_debt:
- `saving_sum` - Сумма экономии банка
- `court_name` - Наименование суда (резервное)
- `typ_name` - Наименование вида заявления
- `user_result_name` - Наименование результата рассмотрения

## Бизнес-логика обработки

### Алгоритм дедупликации истцов:
1. При наличии ИНН - поиск по ИНН
2. При отсутствии ИНН - поиск по ФИО
3. При нахождении дублей - выбор записи с максимальным ID

### Обработка исключительных ситуаций:
- Отсутствие обязательных полей
- Несоответствие форматов данных
- Ошибки подключения к системам

## Нефункциональные требования

### Производительность:
- **Время обработки:** До 5 минут для 100+ задач
- **Периодичность:** Ежедневный запуск в 05:00
- **Окно обработки:** Задачи за последние 2 дня (компенсация сбоев)

### Надежность:
- Повторная обработка при сбоях
- Детальное логирование ошибок
- Уведомления о критических сбоях

### Безопасность:
- Аутентификация через API-ключи
- Валидация входных данных
- Ограничение прав доступа к БД

